!function(){var r=new Date("2019-10-21T09:00:00+00:00").getTime();function a(e,n){return e?n.reduce(function(e,n){return e&&e[n]?e[n]:null},e):null}var o=!1,i=window._mgn||{},c=!1,s=!1,l=i&&i.env;l=l||(window.globalnavConfig&&window.globalnavConfig.env||"production");function u(){return document.querySelector(".mgn-active")}function d(e){u()&&(e.target.closest&&!e.target.closest(".mgn-active")&&f(),setTimeout(function(){o||"A"!=e.target.tagName||f()},100))}function m(e){e.preventDefault();var n=e.currentTarget,t=n.dataset.dropdown,r=document.querySelector(".mgn-dropdown-"+t);if(r){"mobile"==t?(document.querySelector(".mgn-icon-menu").classList.toggle("mgn-disabled"),document.querySelector(".mgn-icon-close").classList.toggle("mgn-disabled")):r.style.right=p(n,r)+"%";var a=u();a&&f(),a&&a==r||setTimeout(function(){r.classList.remove("mgn-disabled"),r.classList.add("mgn-active"),document.addEventListener("click",d)},10)}}function e(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}function v(){for(var e=document.querySelectorAll("#globalnav [data-dropdown]"),n=0;n<e.length;n++)e[n].addEventListener("click",m);window.addEventListener("beforeunload",function(){o=!0});var t=document.querySelector(".mgn-stylesheet").sheet;y()&&(t.insertRule(".mgn-show-pro { display: block !important; }"),t.insertRule(".mgn-hide-pro { display: none; }")),b()&&(t.insertRule(".mgn-show-local { display: block !important; }"),t.insertRule(".mgn-hide-local { display: none; }")),function(){if(!h())return!1;for(var e=0;e<i.user.accounts.length;e++){var n=i.user.accounts[e];if(n.owner_id==i.user.id&&-1!==n.products.indexOf("search"))return!0;if(-1!==n.products.indexOf("account"))return!0}return!1}()&&t.insertRule(".mgn-show-owner { display: block !important; }"),(a(i,["user","account_services","search","limits","local_search"])||Date.now()>r)&&t.insertRule(".mgn-show-lma { display: block !important; }"),function(){var e=document.querySelector(".mgn-nav-meta .mgn-disabled");h()&&!y()&&!b()&&e&&e.classList.remove("mgn-disabled")}(),function(){var e=document.querySelectorAll("#header-nav .mgn-hide-local-managed");if(!w())for(var n=0;n<e.length;n++)e[n].classList.remove("mgn-hide-local-managed");if(_()){var t=document.getElementById("mgn-historical-link");t&&t.classList.remove("mgn-disabled")}}(),function(){var e=document.querySelector("#js-copyright-year");if(e){var n=new Date;e.innerHTML=n.getFullYear()}}(),function(){if(h()&&!document.querySelector("#js-gateway-script")){var e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=i.urls.gateway_stylesheets,document.head.appendChild(e);var n=document.createElement("script");n.type="text/javascript",n.src=i.urls.gateway_scripts,document.body.appendChild(n)}}(),function(){for(var e=document.querySelectorAll(".mgn-drawer-mobile .mgn-item"),n=0;n<e.length;n++)e[n].addEventListener("click",function(e){e.currentTarget.classList.toggle("mgn-open");for(var n=document.querySelectorAll(".mgn-drawer-mobile .mgn-item.mgn-open"),t=0;t<n.length;t++)n[t]!=e.currentTarget&&n[t].classList.remove("mgn-open")})}()}function n(){e(function(){if(s&&c){var e,n={};for(var t in i)n[t]=i[t];for(var t in window.globalnavConfig)n[t]=window.globalnavConfig[t];if(e=document.querySelector("#globalnav")){var r=document.createElement("div");r.innerHTML=Handlebars.partials.globalnav(n),e.appendChild(r)}if(e=document.querySelector("#globalfooter")){var a=document.createElement("div");a.innerHTML=Handlebars.partials.globalfooter(n),e.appendChild(a)}v()}})}function t(n){var e=new XMLHttpRequest;e.addEventListener("load",function(){var e={};try{if(!(e=JSON.parse(this.responseText)).success)throw new Error("Invalid user state");!function(e){function n(e){return"0"!==e?1:0}var t=e.user||{};i={env:e.env?e.env:"production",hosts:e.hosts?e.hosts:{},urls:e.urls?e.urls:{},metanav:n(e.metanav)},e.user&&(i.user={id:parseInt(t.id),display_name:t.display_name,email:t.email,avatar:t.avatar,full_name:t.full_name,mozpoints:n(t.mozpoints),premium:n(t.premium),admin:n(t.admin),verified:n(t.verified),local_push:n(t.local_push)},t.admin_id&&(i.user.admin_id=t.admin_id),t.accounts&&(i.user.accounts=t.accounts),t.account_services&&(i.user.account_services=t.account_services),t.account&&(i.user.account=t.account)),window._mgn=i,s=!0}(e)}catch(e){return}n()});var t="production"===l?"https://moz.com/svc/session":"https://staging.moz.com/svc/session";e.open("GET",t),e.withCredentials=!0,e.send(null)}var g,f=function(){var e=u();e&&(e.classList.remove("mgn-active"),e.classList.add("mgn-disabled")),document.removeEventListener("click",d)},p=function(e,n){var t=document.querySelector(".mgn-bar").offsetWidth;return(7+(t-e.getBoundingClientRect().left-e.offsetWidth))/t*100},h=function(){return!!a(i,["user"])},y=function(){return"active"===a(i,["user","account","products","search","status"])},b=function(){return!!a(i,["user","local_push"])},w=function(){return 1===a(i,["user","account_services","local","limits","managed"])},_=function(){return!!a(i,["user","account_services","local","limits","migration_complete_at"])};!function(e){if(!i||!i.hosts)return t(e);e()}(n),g=n,e(function(){if(document.querySelector("#globalnav .mgn-bar"))return v();function e(){if(window.Handlebars.globalnav)return g();var e=document.createElement("script");e.src="https://moz.com/globalnav/1.6.7/scripts/globalnav_client.hbs.js",e.type="text/javascript",e.onload=function(){c=!0,g()},document.body.appendChild(e)}if(window.Handlebars)return e();var n=document.createElement("script");n.src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.1.2/handlebars.js",n.type="text/javascript",n.onload=e,document.body.appendChild(n)})}();